{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue","mtime":1661243719128},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/babel-loader/lib/index.js","mtime":1661238180117},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLy8g5b+F6KaB44Gq44KC44Gu44Gv44GT44GT44Gn44Kk44Oz44Od44O844OI44GZ44KLCiAgLy8gQOOBry9zcmPjga7lkIzjgZjmhI/lkbPjgafjgZkKICAvLyBpbXBvcnQgc29tZXRoaW5nIGZyb20gJ0AvY29tcG9uZW50cy9zb21ldGhpbmcudnVlJzsKICBpbXBvcnQgeyBiYXNlVXJsIH0gZnJvbSAnQC9hc3NldHMvY29uZmlnLmpzJzsKICBpbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKICBleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnUHJvZmlsZScsCiAgICBkYXRhKCkgewogICAgICAvLyBWdWUuanPjgafkvb/jgYblpInmlbDjga/jgZPjgZPjgavoqJjov7DjgZnjgosKICAgICAgcmV0dXJuIHsKICAgICAgICB1c2VyOiB7CiAgICAgICAgICB1c2VySWQ6IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyksCiAgICAgICAgICBwYXNzd29yZDogbnVsbCwKICAgICAgICAgIG5pY2tuYW1lOiBudWxsLAogICAgICAgICAgYWdlOiBudWxsCiAgICAgICAgfSwKICAgICAgICBlcnI6IG51bGwKICAgICAgfTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIHN1Ym1pdCgpIHsKICAgICAgICBpZiAoIXRoaXMudXNlci5wYXNzd29yZCkgewogICAgICAgICAgdGhpcy5lcnIgPSAi44OR44K544Ov44O844OJ44KS5YWl5Yqb44GX44Gm44GP44Gg44GV44GEIjsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBlbHNlIGlmICghdGhpcy51c2VyLm5pY2tuYW1lKSB7CiAgICAgICAgICB0aGlzLmVyciA9ICLjg4vjg4Pjgq/jg43jg7zjg6DjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCF0aGlzLnVzZXIuYWdlKSB7CiAgICAgICAgICB0aGlzLmVyciA9ICLlubTpvaLjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHsKICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VyLnVzZXJJZCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnVzZXIucGFzc3dvcmQsCiAgICAgICAgICBuaWNrbmFtZTogdGhpcy51c2VyLm5pY2tuYW1lLAogICAgICAgICAgYWdlOiB0aGlzLnVzZXIuYWdlCiAgICAgICAgfQogICAgICAgIGF4aW9zLnB1dChiYXNlVXJsICsgIi91c2VyIiwgcmVxdWVzdEJvZHkpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogIkhvbWUiIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZSk7CiAgICAgICAgICB9KQogICAgICB9LAogICAgICBkZWxldGVVc2VyKCkgewogICAgICAgIGF4aW9zLmRlbGV0ZShiYXNlVXJsICsgIi91c2VyIiwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBhdXRob3JpemF0aW9uOiAibXRpVG9rZW4iLAogICAgICAgICAgfSwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIudXNlcklkCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJMb2dpbiIgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlKTsKICAgICAgICB9KQogICAgICB9LAogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAiTG9naW4ifSk7CiAgICAgIH0KICAgICAgYXhpb3MuZ2V0KGJhc2VVcmwgKyAiL3VzZXIiICsgIj91c2VySWQ9IiArIHRoaXMudXNlci51c2VySWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLnVzZXIubmlja25hbWUgPSByZXNwb25zZS5kYXRhLm5pY2tuYW1lOwogICAgICAgICAgdGhpcy51c2VyLmFnZSA9IHJlc3BvbnNlLmRhdGEuYWdlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuZXJyID0gIuS6iOacn+OBm+OBrOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnyI7CiAgICAgICAgfSk7CiAgICB9CiAgfQo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";AAgDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n  <div class=\"ui main container\">\n    <div class=\"ui negative message\" v-if=\"err\">\n      <div class=\"header\">\n        Error!!\n      </div>\n    <p>{{err}}\n  </p></div>\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\" @submit.prevent=\"submit\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" required disabled />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"text\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            更新\n          </button>\n        </form>\n      </div>\n      <button @click=\"deleteUser\" class=\"ui huge grey fluid button\">\n        退会\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n  // 必要なものはここでインポートする\n  // @は/srcの同じ意味です\n  // import something from '@/components/something.vue';\n  import { baseUrl } from '@/assets/config.js';\n  import axios from \"axios\";\n\n  export default {\n    name: 'Profile',\n    data() {\n      // Vue.jsで使う変数はここに記述する\n      return {\n        user: {\n          userId: window.localStorage.getItem('userId'),\n          password: null,\n          nickname: null,\n          age: null\n        },\n        err: null\n      };\n    },\n    methods: {\n      submit() {\n        if (!this.user.password) {\n          this.err = \"パスワードを入力してください\";\n          return\n        }\n        else if (!this.user.nickname) {\n          this.err = \"ニックネームを入力してください\";\n          return\n        }\n        else if (!this.user.age) {\n          this.err = \"年齢を入力してください\";\n          return;\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n          nickname: this.user.nickname,\n          age: this.user.age\n        }\n        axios.put(baseUrl + \"/user\", requestBody)\n          .then(() => {\n            this.$router.push({ name: \"Home\" });\n          })\n          .catch((e) => {\n            throw new Error(e);\n          })\n      },\n      deleteUser() {\n        axios.delete(baseUrl + \"/user\", {\n          headers: {\n            authorization: \"mtiToken\",\n          },\n          data: {\n            userId: this.user.userId\n          }\n        })\n        .then(() => {\n          this.$router.push({ name: \"Login\" });\n        })\n        .catch((e) => {\n          throw new Error(e);\n        })\n      },\n    },\n    created() {\n      if (!window.localStorage.getItem(\"userId\")) {\n        this.$router.push({name: \"Login\"});\n      }\n      axios.get(baseUrl + \"/user\" + \"?userId=\" + this.user.userId)\n        .then((response) => {\n          console.log(response);\n          this.user.nickname = response.data.nickname;\n          this.user.age = response.data.age;\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        });\n    }\n  }\n</script>\n<style scoped>\n  /* このコンポーネントだけに適用するCSSは */\n</style>"]}]}