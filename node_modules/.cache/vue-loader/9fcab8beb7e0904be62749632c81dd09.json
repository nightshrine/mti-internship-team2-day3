{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue?vue&type=style&index=0&id=e1714d34&prod&scoped=true&lang=css&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue","mtime":1661235136000},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/css-loader/dist/cjs.js","mtime":1661238179817},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1661238182625},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/postcss-loader/src/index.js","mtime":1661238178809},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIOOBk+OBruOCs+ODs+ODneODvOODjeODs+ODiOOBoOOBkeOBq+mBqeeUqOOBmeOCi0NTU+OBryAqLwo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAuIA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"ui main container\" @submit.prevent=\"submit\">\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"password\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            {{ submitText }}\n          </button>\n        </form>\n      </div>\n      <button @click=\"toggleMode()\" class=\"ui huge grey fluid button\" type=\"submit\">\n        {{ toggleText }}\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n// 必要なものはここでインポートする\n// @は/srcの同じ意味です\n// import something from '@/components/something.vue';\nimport { baseUrl } from '@/assets/config.js';\nimport axios from \"axios\";\n\nexport default {\n  name: 'Login',\n  components: {\n   // 読み込んだコンポーネント名をここに記述する\n  },\n  data() {\n  // Vue.jsで使う変数はここに記述する\n    return {\n      isLogin:true,\n      user: {\n        userId: null,\n        password: null,\n        nickname: null,\n        age: null\n      },\n    };\n  },\n  computed: {\n  // 計算した結果を変数として利用したいときはここに記述する\n  submitText() {\n    return this.isLogin ? \"ログイン\" : \"新規登録\";\n  },\n  toggleText() {\n    return this.isLogin ? \"新規登録\" : \"ログイン\" ;\n  }\n  },\n  methods: {\n  // Vue.jsで使う関数はここで記述する\n    toggleMode() {\n      this.isLogin = !this.isLogin;\n    },\n    submit() {\n      if (this.isLogin) {\n        if (!this.user.userId) {\n          this.err = 'userIdを入力してください';\n        }\n        else if (!this.user.password) {\n          this.err = 'パスワードを入力してください';\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n        }\n        axios.post(baseUrl + \"/user/login\", requestBody)\n          .then((response) => {\n            // 成功したときの処理はここに記述する\n            console.log(response.data);\n            window.localStorage.setItem('token', response.data.token);\n            window.localStorage.setItem('userId', this.user.userId);\n            console.log(window.localStorage.getItem('token'))\n            this.$router.push({ name: 'Home' });\n          })\n          .catch(() => {\n            // レスポンスがエラーで返ってきたときの処理はここに記述する\n            this.err = '予期せぬエラーが発生しました';\n          });\n        return;\n      }\n      if (!this.user.nickname) {\n        this.err = \"ニックネームを入力してください\";\n      } else if (!this.user.age) {\n        this.err = \"年齢を入力してください\";\n      }\n      \n      const requestBody = {\n        userId: this.user.userId,\n        password: this.user.password,\n        nickname: this.user.nickname,\n        age: this.user.age,\n      }\n      axios.post(baseUrl + \"/user/signup\", requestBody)\n        .then((response) => {\n          window.localStorage.setItem('token', response.data.token);\n          window.localStorage.setItem('userId', this.user.userId);\n          console.log(window.localStorage.getItem('token'))\n          this.$router.push({ name: 'Home' });\n          console.log(response.data);\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        }\n      );\n    }\n  },\n}\n</script>\n<style scoped>\n/* このコンポーネントだけに適用するCSSは */\n</style>"]}]}