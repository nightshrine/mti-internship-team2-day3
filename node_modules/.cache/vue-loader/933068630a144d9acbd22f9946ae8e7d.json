{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue","mtime":1661235136000},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/babel-loader/lib/index.js","mtime":1661238180117},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIOW/heimgeOBquOCguOBruOBr+OBk+OBk+OBp+OCpOODs+ODneODvOODiOOBmeOCiwovLyBA44GvL3NyY+OBruWQjOOBmOaEj+WRs+OBp+OBmQovLyBpbXBvcnQgc29tZXRoaW5nIGZyb20gJ0AvY29tcG9uZW50cy9zb21ldGhpbmcudnVlJzsKaW1wb3J0IHsgYmFzZVVybCB9IGZyb20gJ0AvYXNzZXRzL2NvbmZpZy5qcyc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnRzOiB7CiAgIC8vIOiqreOBv+i+vOOCk+OBoOOCs+ODs+ODneODvOODjeODs+ODiOWQjeOCkuOBk+OBk+OBq+iomOi/sOOBmeOCiwogIH0sCiAgZGF0YSgpIHsKICAvLyBWdWUuanPjgafkvb/jgYblpInmlbDjga/jgZPjgZPjgavoqJjov7DjgZnjgosKICAgIHJldHVybiB7CiAgICAgIGlzTG9naW46dHJ1ZSwKICAgICAgdXNlcjogewogICAgICAgIHVzZXJJZDogbnVsbCwKICAgICAgICBwYXNzd29yZDogbnVsbCwKICAgICAgICBuaWNrbmFtZTogbnVsbCwKICAgICAgICBhZ2U6IG51bGwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogIC8vIOioiOeul+OBl+OBn+e1kOaenOOCkuWkieaVsOOBqOOBl+OBpuWIqeeUqOOBl+OBn+OBhOOBqOOBjeOBr+OBk+OBk+OBq+iomOi/sOOBmeOCiwogIHN1Ym1pdFRleHQoKSB7CiAgICByZXR1cm4gdGhpcy5pc0xvZ2luID8gIuODreOCsOOCpOODsyIgOiAi5paw6KaP55m76YyyIjsKICB9LAogIHRvZ2dsZVRleHQoKSB7CiAgICByZXR1cm4gdGhpcy5pc0xvZ2luID8gIuaWsOimj+eZu+mMsiIgOiAi44Ot44Kw44Kk44OzIiA7CiAgfQogIH0sCiAgbWV0aG9kczogewogIC8vIFZ1ZS5qc+OBp+S9v+OBhumWouaVsOOBr+OBk+OBk+OBp+iomOi/sOOBmeOCiwogICAgdG9nZ2xlTW9kZSgpIHsKICAgICAgdGhpcy5pc0xvZ2luID0gIXRoaXMuaXNMb2dpbjsKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLmlzTG9naW4pIHsKICAgICAgICBpZiAoIXRoaXMudXNlci51c2VySWQpIHsKICAgICAgICAgIHRoaXMuZXJyID0gJ3VzZXJJZOOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCc7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCF0aGlzLnVzZXIucGFzc3dvcmQpIHsKICAgICAgICAgIHRoaXMuZXJyID0gJ+ODkeOCueODr+ODvOODieOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCc7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gewogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIudXNlcklkLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMudXNlci5wYXNzd29yZCwKICAgICAgICB9CiAgICAgICAgYXhpb3MucG9zdChiYXNlVXJsICsgIi91c2VyL2xvZ2luIiwgcmVxdWVzdEJvZHkpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgLy8g5oiQ5Yqf44GX44Gf44Go44GN44Gu5Yem55CG44Gv44GT44GT44Gr6KiY6L+w44GZ44KLCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgdGhpcy51c2VyLnVzZXJJZCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnSG9tZScgfSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgLy8g44Os44K544Od44Oz44K544GM44Ko44Op44O844Gn6L+U44Gj44Gm44GN44Gf44Go44GN44Gu5Yem55CG44Gv44GT44GT44Gr6KiY6L+w44GZ44KLCiAgICAgICAgICAgIHRoaXMuZXJyID0gJ+S6iOacn+OBm+OBrOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnyc7CiAgICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnVzZXIubmlja25hbWUpIHsKICAgICAgICB0aGlzLmVyciA9ICLjg4vjg4Pjgq/jg43jg7zjg6DjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnVzZXIuYWdlKSB7CiAgICAgICAgdGhpcy5lcnIgPSAi5bm06b2i44KS5YWl5Yqb44GX44Gm44GP44Gg44GV44GEIjsKICAgICAgfQogICAgICAKICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7CiAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIudXNlcklkLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnVzZXIucGFzc3dvcmQsCiAgICAgICAgbmlja25hbWU6IHRoaXMudXNlci5uaWNrbmFtZSwKICAgICAgICBhZ2U6IHRoaXMudXNlci5hZ2UsCiAgICAgIH0KICAgICAgYXhpb3MucG9zdChiYXNlVXJsICsgIi91c2VyL3NpZ251cCIsIHJlcXVlc3RCb2R5KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCB0aGlzLnVzZXIudXNlcklkKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ0hvbWUnIH0pOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5lcnIgPSAi5LqI5pyf44Gb44Gs44Ko44Op44O844GM55m655Sf44GX44G+44GX44GfIjsKICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"ui main container\" @submit.prevent=\"submit\">\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"password\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            {{ submitText }}\n          </button>\n        </form>\n      </div>\n      <button @click=\"toggleMode()\" class=\"ui huge grey fluid button\" type=\"submit\">\n        {{ toggleText }}\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n// 必要なものはここでインポートする\n// @は/srcの同じ意味です\n// import something from '@/components/something.vue';\nimport { baseUrl } from '@/assets/config.js';\nimport axios from \"axios\";\n\nexport default {\n  name: 'Login',\n  components: {\n   // 読み込んだコンポーネント名をここに記述する\n  },\n  data() {\n  // Vue.jsで使う変数はここに記述する\n    return {\n      isLogin:true,\n      user: {\n        userId: null,\n        password: null,\n        nickname: null,\n        age: null\n      },\n    };\n  },\n  computed: {\n  // 計算した結果を変数として利用したいときはここに記述する\n  submitText() {\n    return this.isLogin ? \"ログイン\" : \"新規登録\";\n  },\n  toggleText() {\n    return this.isLogin ? \"新規登録\" : \"ログイン\" ;\n  }\n  },\n  methods: {\n  // Vue.jsで使う関数はここで記述する\n    toggleMode() {\n      this.isLogin = !this.isLogin;\n    },\n    submit() {\n      if (this.isLogin) {\n        if (!this.user.userId) {\n          this.err = 'userIdを入力してください';\n        }\n        else if (!this.user.password) {\n          this.err = 'パスワードを入力してください';\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n        }\n        axios.post(baseUrl + \"/user/login\", requestBody)\n          .then((response) => {\n            // 成功したときの処理はここに記述する\n            console.log(response.data);\n            window.localStorage.setItem('token', response.data.token);\n            window.localStorage.setItem('userId', this.user.userId);\n            console.log(window.localStorage.getItem('token'))\n            this.$router.push({ name: 'Home' });\n          })\n          .catch(() => {\n            // レスポンスがエラーで返ってきたときの処理はここに記述する\n            this.err = '予期せぬエラーが発生しました';\n          });\n        return;\n      }\n      if (!this.user.nickname) {\n        this.err = \"ニックネームを入力してください\";\n      } else if (!this.user.age) {\n        this.err = \"年齢を入力してください\";\n      }\n      \n      const requestBody = {\n        userId: this.user.userId,\n        password: this.user.password,\n        nickname: this.user.nickname,\n        age: this.user.age,\n      }\n      axios.post(baseUrl + \"/user/signup\", requestBody)\n        .then((response) => {\n          window.localStorage.setItem('token', response.data.token);\n          window.localStorage.setItem('userId', this.user.userId);\n          console.log(window.localStorage.getItem('token'))\n          this.$router.push({ name: 'Home' });\n          console.log(response.data);\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        }\n      );\n    }\n  },\n}\n</script>\n<style scoped>\n/* このコンポーネントだけに適用するCSSは */\n</style>"]}]}