{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Login.vue","mtime":1661243702784},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/babel-loader/lib/index.js","mtime":1661238180117},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIOW/heimgeOBquOCguOBruOBr+OBk+OBk+OBp+OCpOODs+ODneODvOODiOOBmeOCiwovLyBA44GvL3NyY+OBruWQjOOBmOaEj+WRs+OBp+OBmQovLyBpbXBvcnQgc29tZXRoaW5nIGZyb20gJ0AvY29tcG9uZW50cy9zb21ldGhpbmcudnVlJzsKaW1wb3J0IHsgYmFzZVVybCB9IGZyb20gJ0AvYXNzZXRzL2NvbmZpZy5qcyc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnRzOiB7CiAgIC8vIOiqreOBv+i+vOOCk+OBoOOCs+ODs+ODneODvOODjeODs+ODiOWQjeOCkuOBk+OBk+OBq+iomOi/sOOBmeOCiwogIH0sCiAgZGF0YSgpIHsKICAvLyBWdWUuanPjgafkvb/jgYblpInmlbDjga/jgZPjgZPjgavoqJjov7DjgZnjgosKICAgIHJldHVybiB7CiAgICAgIGlzTG9naW46dHJ1ZSwKICAgICAgdXNlcjogewogICAgICAgIHVzZXJJZDogbnVsbCwKICAgICAgICBwYXNzd29yZDogbnVsbCwKICAgICAgICBuaWNrbmFtZTogbnVsbCwKICAgICAgICBhZ2U6IG51bGwKICAgICAgfSwKICAgICAgZXJyOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAvLyDoqIjnrpfjgZfjgZ/ntZDmnpzjgpLlpInmlbDjgajjgZfjgabliKnnlKjjgZfjgZ/jgYTjgajjgY3jga/jgZPjgZPjgavoqJjov7DjgZnjgosKICBzdWJtaXRUZXh0KCkgewogICAgcmV0dXJuIHRoaXMuaXNMb2dpbiA/ICLjg63jgrDjgqTjg7MiIDogIuaWsOimj+eZu+mMsiI7CiAgfSwKICB0b2dnbGVUZXh0KCkgewogICAgcmV0dXJuIHRoaXMuaXNMb2dpbiA/ICLmlrDopo/nmbvpjLIiIDogIuODreOCsOOCpOODsyIgOwogIH0KICB9LAogIG1ldGhvZHM6IHsKICAvLyBWdWUuanPjgafkvb/jgYbplqLmlbDjga/jgZPjgZPjgafoqJjov7DjgZnjgosKICAgIHRvZ2dsZU1vZGUoKSB7CiAgICAgIHRoaXMuaXNMb2dpbiA9ICF0aGlzLmlzTG9naW47CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBpZiAodGhpcy5pc0xvZ2luKSB7CiAgICAgICAgaWYgKCF0aGlzLnVzZXIudXNlcklkKSB7CiAgICAgICAgICB0aGlzLmVyciA9ICd1c2VySWTjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICghdGhpcy51c2VyLnBhc3N3b3JkKSB7CiAgICAgICAgICB0aGlzLmVyciA9ICfjg5Hjgrnjg6/jg7zjg4njgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHsKICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VyLnVzZXJJZCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnVzZXIucGFzc3dvcmQsCiAgICAgICAgfQogICAgICAgIGF4aW9zLnBvc3QoYmFzZVVybCArICIvdXNlci9sb2dpbiIsIHJlcXVlc3RCb2R5KQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIC8vIOaIkOWKn+OBl+OBn+OBqOOBjeOBruWHpueQhuOBr+OBk+OBk+OBq+iomOi/sOOBmeOCiwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHRoaXMudXNlci51c2VySWQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ0hvbWUnIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIC8vIOODrOOCueODneODs+OCueOBjOOCqOODqeODvOOBp+i/lOOBo+OBpuOBjeOBn+OBqOOBjeOBruWHpueQhuOBr+OBk+OBk+OBq+iomOi/sOOBmeOCiwogICAgICAgICAgICB0aGlzLmVyciA9ICfkuojmnJ/jgZvjgazjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ8nOwogICAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdGhpcy51c2VyLm5pY2tuYW1lKSB7CiAgICAgICAgdGhpcy5lcnIgPSAi44OL44OD44Kv44ON44O844Og44KS5YWl5Yqb44GX44Gm44GP44Gg44GV44GEIjsKICAgICAgfSBlbHNlIGlmICghdGhpcy51c2VyLmFnZSkgewogICAgICAgIHRoaXMuZXJyID0gIuW5tOm9ouOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCI7CiAgICAgIH0KICAgICAgCiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gewogICAgICAgIHVzZXJJZDogdGhpcy51c2VyLnVzZXJJZCwKICAgICAgICBwYXNzd29yZDogdGhpcy51c2VyLnBhc3N3b3JkLAogICAgICAgIG5pY2tuYW1lOiB0aGlzLnVzZXIubmlja25hbWUsCiAgICAgICAgYWdlOiB0aGlzLnVzZXIuYWdlLAogICAgICB9CiAgICAgIGF4aW9zLnBvc3QoYmFzZVVybCArICIvdXNlci9zaWdudXAiLCByZXF1ZXN0Qm9keSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgdGhpcy51c2VyLnVzZXJJZCk7CiAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdIb21lJyB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuZXJyID0gIuS6iOacn+OBm+OBrOOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBnyI7CiAgICAgICAgfQogICAgICApOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"ui main container\" @submit.prevent=\"submit\">\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"password\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\" v-if=\"!isLogin\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            {{ submitText }}\n          </button>\n        </form>\n      </div>\n      <button @click=\"toggleMode()\" class=\"ui huge grey fluid button\" type=\"submit\">\n        {{ toggleText }}\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n// 必要なものはここでインポートする\n// @は/srcの同じ意味です\n// import something from '@/components/something.vue';\nimport { baseUrl } from '@/assets/config.js';\nimport axios from \"axios\";\n\nexport default {\n  name: 'Login',\n  components: {\n   // 読み込んだコンポーネント名をここに記述する\n  },\n  data() {\n  // Vue.jsで使う変数はここに記述する\n    return {\n      isLogin:true,\n      user: {\n        userId: null,\n        password: null,\n        nickname: null,\n        age: null\n      },\n      err: null\n    };\n  },\n  computed: {\n  // 計算した結果を変数として利用したいときはここに記述する\n  submitText() {\n    return this.isLogin ? \"ログイン\" : \"新規登録\";\n  },\n  toggleText() {\n    return this.isLogin ? \"新規登録\" : \"ログイン\" ;\n  }\n  },\n  methods: {\n  // Vue.jsで使う関数はここで記述する\n    toggleMode() {\n      this.isLogin = !this.isLogin;\n    },\n    submit() {\n      if (this.isLogin) {\n        if (!this.user.userId) {\n          this.err = 'userIdを入力してください';\n        }\n        else if (!this.user.password) {\n          this.err = 'パスワードを入力してください';\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n        }\n        axios.post(baseUrl + \"/user/login\", requestBody)\n          .then((response) => {\n            // 成功したときの処理はここに記述する\n            console.log(response.data);\n            window.localStorage.setItem('token', response.data.token);\n            window.localStorage.setItem('userId', this.user.userId);\n            console.log(window.localStorage.getItem('token'))\n            this.$router.push({ name: 'Home' });\n          })\n          .catch(() => {\n            // レスポンスがエラーで返ってきたときの処理はここに記述する\n            this.err = '予期せぬエラーが発生しました';\n          });\n        return;\n      }\n      if (!this.user.nickname) {\n        this.err = \"ニックネームを入力してください\";\n      } else if (!this.user.age) {\n        this.err = \"年齢を入力してください\";\n      }\n      \n      const requestBody = {\n        userId: this.user.userId,\n        password: this.user.password,\n        nickname: this.user.nickname,\n        age: this.user.age,\n      }\n      axios.post(baseUrl + \"/user/signup\", requestBody)\n        .then((response) => {\n          window.localStorage.setItem('token', response.data.token);\n          window.localStorage.setItem('userId', this.user.userId);\n          console.log(window.localStorage.getItem('token'))\n          this.$router.push({ name: 'Home' });\n          console.log(response.data);\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        }\n      );\n    }\n  },\n}\n</script>\n<style scoped>\n/* このコンポーネントだけに適用するCSSは */\n</style>"]}]}