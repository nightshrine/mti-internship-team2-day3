{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue?vue&type=style&index=0&id=4b3cfccb&prod&scoped=true&lang=css&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue","mtime":1661242204331},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/css-loader/dist/cjs.js","mtime":1661238179817},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1661238182625},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/postcss-loader/src/index.js","mtime":1661238178809},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIOOBk+OBruOCs+ODs+ODneODvOODjeODs+ODiOOBoOOBkeOBq+mBqeeUqOOBmeOCi0NTU+OBryAqLwo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";AAoIA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n  <div class=\"ui main container\">\n    <div class=\"ui negative message\" v-if=\"err\">\n    <div class=\"header\">\n      Error!!\n    </div>\n    <p>{{err}}\n  </p></div>\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\" @submit.prevent=\"submit\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" required disabled />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"text\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            更新\n          </button>\n        </form>\n      </div>\n      <button @click=\"deleteUser\" class=\"ui huge grey fluid button\">\n        退会\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n  // 必要なものはここでインポートする\n  // @は/srcの同じ意味です\n  // import something from '@/components/something.vue';\n  import { baseUrl } from '@/assets/config.js';\n  import axios from \"axios\";\n\n  export default {\n    name: 'Profile',\n    data() {\n      // Vue.jsで使う変数はここに記述する\n      return {\n        user: {\n          userId: window.localStorage.getItem('userId'),\n          password: null,\n          nickname: null,\n          age: null\n        },\n        err: null\n      };\n    },\n    methods: {\n      submit() {\n        if (!this.user.password) {\n          this.err = \"パスワードを入力してください\";\n          return\n        }\n        else if (!this.user.nickname) {\n          this.err = \"ニックネームを入力してください\";\n          return\n        }\n        else if (!this.user.age) {\n          this.err = \"年齢を入力してください\";\n          return;\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n          nickname: this.user.nickname,\n          age: this.user.age\n        }\n        axios.put(baseUrl + \"/user\", requestBody)\n          .then(() => {\n            this.$router.push({ name: \"Home\" });\n          })\n          .catch((e) => {\n            throw new Error(e);\n          })\n      },\n      deleteUser() {\n        axios.delete(baseUrl + \"/user\", {\n          headers: {\n            authorization: \"mtiToken\",\n          },\n          data: {\n            userId: this.user.userId\n          }\n        })\n        .then(() => {\n          this.$router.push({ name: \"Login\" });\n        })\n        .catch((e) => {\n          throw new Error(e);\n        })\n      },\n    },\n    created() {\n      if (!window.localStorage.getItem(\"userId\")) {\n        this.$router.push({name: \"Login\"});\n      }\n      axios.get(baseUrl + \"/user\" + \"?userId=\" + this.user.userId)\n        .then((response) => {\n          console.log(response);\n          this.user.nickname = response.data.nickname;\n          this.user.age = response.data.age;\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        });\n    }\n  }\n</script>\n<style scoped>\n  /* このコンポーネントだけに適用するCSSは */\n</style>"]}]}