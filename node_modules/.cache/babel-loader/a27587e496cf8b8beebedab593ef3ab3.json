{"remainingRequest":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/thread-loader/dist/cjs.js!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/babel-loader/lib/index.js!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/src/views/Profile.vue","mtime":1661242204331},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/babel.config.js","mtime":1661237967921},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/thread-loader/dist/cjs.js","mtime":1661238178909},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/babel-loader/lib/index.js","mtime":1661238180117},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/cache-loader/dist/cjs.js","mtime":1661238179693},{"path":"/home/nightshrine/job/intern/エムティーアイ/tech-2022-term2-for-students/node_modules/vue-loader/lib/index.js","mtime":1661238182421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwovLyDlv4XopoHjgarjgoLjga7jga/jgZPjgZPjgafjgqTjg7Pjg53jg7zjg4jjgZnjgosKLy8gQOOBry9zcmPjga7lkIzjgZjmhI/lkbPjgafjgZkKLy8gaW1wb3J0IHNvbWV0aGluZyBmcm9tICdAL2NvbXBvbmVudHMvc29tZXRoaW5nLnZ1ZSc7CmltcG9ydCB7IGJhc2VVcmwgfSBmcm9tICdAL2Fzc2V0cy9jb25maWcuanMnOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Byb2ZpbGUnLAoKICBkYXRhKCkgewogICAgLy8gVnVlLmpz44Gn5L2/44GG5aSJ5pWw44Gv44GT44GT44Gr6KiY6L+w44GZ44KLCiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgdXNlcklkOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpLAogICAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICAgIG5pY2tuYW1lOiBudWxsLAogICAgICAgIGFnZTogbnVsbAogICAgICB9LAogICAgICBlcnI6IG51bGwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgc3VibWl0KCkgewogICAgICBpZiAoIXRoaXMudXNlci5wYXNzd29yZCkgewogICAgICAgIHRoaXMuZXJyID0gIuODkeOCueODr+ODvOODieOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCI7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnVzZXIubmlja25hbWUpIHsKICAgICAgICB0aGlzLmVyciA9ICLjg4vjg4Pjgq/jg43jg7zjg6DjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy51c2VyLmFnZSkgewogICAgICAgIHRoaXMuZXJyID0gIuW5tOm9ouOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhCI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHsKICAgICAgICB1c2VySWQ6IHRoaXMudXNlci51c2VySWQsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMudXNlci5wYXNzd29yZCwKICAgICAgICBuaWNrbmFtZTogdGhpcy51c2VyLm5pY2tuYW1lLAogICAgICAgIGFnZTogdGhpcy51c2VyLmFnZQogICAgICB9OwogICAgICBheGlvcy5wdXQoYmFzZVVybCArICIvdXNlciIsIHJlcXVlc3RCb2R5KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiSG9tZSIKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUpOwogICAgICB9KTsKICAgIH0sCgogICAgZGVsZXRlVXNlcigpIHsKICAgICAgYXhpb3MuZGVsZXRlKGJhc2VVcmwgKyAiL3VzZXIiLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgYXV0aG9yaXphdGlvbjogIm10aVRva2VuIgogICAgICAgIH0sCiAgICAgICAgZGF0YTogewogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIudXNlcklkCiAgICAgICAgfQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRocm93IG5ldyBFcnJvcihlKTsKICAgICAgfSk7CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgfSk7CiAgICB9CgogICAgYXhpb3MuZ2V0KGJhc2VVcmwgKyAiL3VzZXIiICsgIj91c2VySWQ9IiArIHRoaXMudXNlci51c2VySWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIHRoaXMudXNlci5uaWNrbmFtZSA9IHJlc3BvbnNlLmRhdGEubmlja25hbWU7CiAgICAgIHRoaXMudXNlci5hZ2UgPSByZXNwb25zZS5kYXRhLmFnZTsKICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgdGhpcy5lcnIgPSAi5LqI5pyf44Gb44Gs44Ko44Op44O844GM55m655Sf44GX44G+44GX44GfIjsKICAgIH0pOwogIH0KCn07"},{"version":3,"mappings":";AAgDA;AACA;AACA;AACA;AACA;AAEA;EACAA,eADA;;EAEAC;IACA;IACA;MACAC;QACAC,6CADA;QAEAC,cAFA;QAGAC,cAHA;QAIAC;MAJA,CADA;MAOAC;IAPA;EASA,CAbA;;EAcAC;IACAC;MACA;QACA;QACA;MACA,CAHA,MAIA;QACA;QACA;MACA,CAHA,MAIA;QACA;QACA;MACA;;MACA;QACAN,wBADA;QAEAC,4BAFA;QAGAC,4BAHA;QAIAC;MAJA;MAMAI,0CACAC,IADA,CACA;QACA;UAAAX;QAAA;MACA,CAHA,EAIAY,KAJA,CAIAC;QACA;MACA,CANA;IAOA,CA3BA;;IA4BAC;MACAJ;QACAK;UACAC;QADA,CADA;QAIAf;UACAE;QADA;MAJA,GAQAQ,IARA,CAQA;QACA;UAAAX;QAAA;MACA,CAVA,EAWAY,KAXA,CAWAC;QACA;MACA,CAbA;IAcA;;EA3CA,CAdA;;EA2DAI;IACA;MACA;QAAAjB;MAAA;IACA;;IACAU,6DACAC,IADA,CACAO;MACAC;MACA;MACA;IACA,CALA,EAMAP,KANA,CAMA;MACA;IACA,CARA;EASA;;AAxEA","names":["name","data","user","userId","password","nickname","age","err","methods","submit","axios","then","catch","e","deleteUser","headers","authorization","created","response","console"],"sourceRoot":"src/views","sources":["Profile.vue"],"sourcesContent":["<template>\n  <div>\n  <div class=\"ui main container\">\n    <div class=\"ui negative message\" v-if=\"err\">\n    <div class=\"header\">\n      Error!!\n    </div>\n    <p>{{err}}\n  </p></div>\n      <!-- 基本的なコンテンツはここに記載する -->\n      <div class=\"ui segment\">\n        <form class=\"ui large form\" @submit.prevent=\"submit\">\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"user icon\"></i>\n              <input type=\"text\" placeholder=\"ID\" v-model=\"user.userId\" required disabled />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"lock icon\"></i>\n              <input type=\"text\" placeholder=\"Password\" v-model=\"user.password\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"tag icon\"></i>\n              <input type=\"text\" placeholder=\"Nickname\" v-model=\"user.nickname\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"ui left icon input\">\n              <i class=\"calendar icon\"></i>\n              <input type=\"text\" placeholder=\"Age\" v-model.number=\"user.age\" />\n            </div>\n          </div>\n          <button class=\"ui huge green fluid button\" type=\"submit\">\n            更新\n          </button>\n        </form>\n      </div>\n      <button @click=\"deleteUser\" class=\"ui huge grey fluid button\">\n        退会\n      </button>\n    </div>\n  </div>\n</template>\n<script>\n  // 必要なものはここでインポートする\n  // @は/srcの同じ意味です\n  // import something from '@/components/something.vue';\n  import { baseUrl } from '@/assets/config.js';\n  import axios from \"axios\";\n\n  export default {\n    name: 'Profile',\n    data() {\n      // Vue.jsで使う変数はここに記述する\n      return {\n        user: {\n          userId: window.localStorage.getItem('userId'),\n          password: null,\n          nickname: null,\n          age: null\n        },\n        err: null\n      };\n    },\n    methods: {\n      submit() {\n        if (!this.user.password) {\n          this.err = \"パスワードを入力してください\";\n          return\n        }\n        else if (!this.user.nickname) {\n          this.err = \"ニックネームを入力してください\";\n          return\n        }\n        else if (!this.user.age) {\n          this.err = \"年齢を入力してください\";\n          return;\n        }\n        const requestBody = {\n          userId: this.user.userId,\n          password: this.user.password,\n          nickname: this.user.nickname,\n          age: this.user.age\n        }\n        axios.put(baseUrl + \"/user\", requestBody)\n          .then(() => {\n            this.$router.push({ name: \"Home\" });\n          })\n          .catch((e) => {\n            throw new Error(e);\n          })\n      },\n      deleteUser() {\n        axios.delete(baseUrl + \"/user\", {\n          headers: {\n            authorization: \"mtiToken\",\n          },\n          data: {\n            userId: this.user.userId\n          }\n        })\n        .then(() => {\n          this.$router.push({ name: \"Login\" });\n        })\n        .catch((e) => {\n          throw new Error(e);\n        })\n      },\n    },\n    created() {\n      if (!window.localStorage.getItem(\"userId\")) {\n        this.$router.push({name: \"Login\"});\n      }\n      axios.get(baseUrl + \"/user\" + \"?userId=\" + this.user.userId)\n        .then((response) => {\n          console.log(response);\n          this.user.nickname = response.data.nickname;\n          this.user.age = response.data.age;\n        })\n        .catch(() => {\n          this.err = \"予期せぬエラーが発生しました\";\n        });\n    }\n  }\n</script>\n<style scoped>\n  /* このコンポーネントだけに適用するCSSは */\n</style>"]}]}